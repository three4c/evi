# Copilot レビュー指示

## 言語設定

すべてのコードレビューは日本語で実施してください。

## レビューコメントのラベル付け

各レビューコメントの冒頭に、以下のラベルを必ず付与してください:

### ラベル一覧

- **`[Q]`** 質問 (Question)
  - 質問。相手は回答が必要
  - 例: `[Q] この関数の戻り値がnullになるケースはありますか?`

- **`[FYI]`** 参考まで (For your information)
  - 参考までに共有。アクションは不要 (確認事項を残す場合などに使用)
  - 例: `[FYI] 類似の実装が他のファイルにもあります`

- **`[NITS]`** あら捜し (Nitpick)
  - 重箱の隅をつつく提案。無視しても良い
  - 例: `[NITS] 変数名をより明確にできます`

- **`[NR]`** お手すきで (No rush)
  - 今やらなくて良いが、将来的には解決したい提案。タスク化や修正を検討
  - 例: `[NR] パフォーマンス改善の余地があります`

- **`[IMO]`** 提案 (In my opinion)
  - 個人的な見解や、軽微な提案。タスク化や修正を検討
  - 例: `[IMO] この処理は別関数に切り出した方が読みやすいかもしれません`

- **`[MUST]`** 必須 (Must)
  - これを直さないと承認できない。修正を検討
  - 例: `[MUST] このセキュリティ脆弱性は修正が必要です`

## レビュー基準

以下の観点でコードをレビューし、適切なラベルを付けてください:

### MUST (必須) とすべき項目

- セキュリティ脆弱性
- 重大なバグや論理エラー
- パフォーマンスの致命的な問題
- 本番環境での障害につながる可能性がある問題

### IMO/NR (提案) とすべき項目

- コードの可読性の改善
- リファクタリングの提案
- パフォーマンスの最適化
- 設計パターンの提案

### NITS (あら捜し) とすべき項目

- コーディングスタイルの細かい指摘
- 命名の微調整
- コメントの追加提案

### Q (質問) とすべき項目

- 実装意図の確認
- 仕様の不明点
- テストケースの確認

### FYI (参考まで) とすべき項目

- 関連情報の共有
- 類似実装の参照
- ドキュメントへのリンク

## コメント例

```
[MUST] セキュリティ: ユーザー入力のサニタイズが不足しています。XSS攻撃のリスクがあるため、エスケープ処理を追加してください。

[IMO] この条件分岐はearly returnにすることで、ネストを減らせます。

[Q] この非同期処理でエラーが発生した場合、どのようにハンドリングする想定ですか?

[NITS] 変数名 `tmp` は `temporaryResult` などより具体的な名前にできます。

[FYI] 類似の実装が src/utils/validator.ts にあります。共通化を検討してもよいかもしれません。

[NR] この処理はキャッシュを導入することでパフォーマンス改善できる可能性があります。
```

## レビューの進め方

1. コード全体を確認し、重要度の高い問題から指摘する
2. 各コメントには必ずラベルを付ける
3. MUSTラベルがある場合は、レビューの最後にまとめて強調する
4. 肯定的なフィードバックも積極的に行う
